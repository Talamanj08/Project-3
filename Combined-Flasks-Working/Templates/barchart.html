<!DOCTYPE html>
<html>
<head>
    <title>Bar Charts</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div>
        <h2>Vaccination and COVID-19 Statistics - 2021</h2>
        <canvas id="barchart-2021"></canvas>
    </div>
    <div>
        <h2>Vaccination and COVID-19 Statistics - 2022</h2>
        <canvas id="barchart-2022"></canvas>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var ctx1 = document.getElementById('barchart-2021').getContext('2d');
            var ctx2 = document.getElementById('barchart-2022').getContext('2d');

            var data1 = JSON.parse('{{ chart_data_2021 | safe }}');
            var data2 = JSON.parse('{{ chart_data_2022 | safe }}');

            var labels1 = data1.labels;
            var labels2 = data2.labels;

            var counts1 = data1.counts;
            var counts2 = data2.counts;

            //  Barchart 1    
            var chartData1 = {
                labels: labels1,
                datasets: [{
                    label: 'Counts',
                    data: counts1,
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            };
            
            //  Barchart 2
            var chartData2 = {
                labels: labels2,
                datasets: [{
                    label: 'Counts',
                    data: counts2,
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            };


            // Set barchat layout options
            var options = {
                responsive: true,
                scales: {
                    y: {
                        type: 'logarithmic',
                        ticks: {
                            min: 100000,
                            max: 250000000,
                            callback: function(value, index, values) {
                                if (value === 100000) return '100,000';
                                if (value === 1000000) return '1,000,000';
                                if (value === 10000000) return '10,000,000';
                                if (value === 200000000) return '200,000,000';
                                return '';
                            }
                        },
                        grid: {
                            display: false  // To remove the grid lines
                        }
                    }
                }
            };


            new Chart(ctx1, {
                type: 'bar',
                data: chartData1,
                options: options
            });

            new Chart(ctx2, {
                type: 'bar',
                data: chartData2,
                options: options
            });
        });
    </script>
</body>
</html>
